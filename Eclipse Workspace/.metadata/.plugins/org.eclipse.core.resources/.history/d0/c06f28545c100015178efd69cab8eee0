import java.io.*;
import java.util.*;
public class Simulator {
	
	public static void main(String[] args) throws IOException{
		
		//Filewriter thingies
		int num = 0;
		while(new File("./output"+num+".csv").exists()){
			num++;
		}
		FileWriter writer = new FileWriter("./output"+num+".csv");
		
		//PID and other setup
		PID pid = new PID(0.0, 1, 0, 0);
		double time = 0.0;
		
		double rate = 0.1;
		double processRate = 0.2;
		
		double value = 5.0;
		double changeRate = 0.0;
		
		ArrayList<Double> times = new ArrayList<Double>();
		ArrayList<Double> values = new ArrayList<Double>();
		while(time < 25){
			System.out.println("Time: " + time + "\tValue: " + value);
			times.add(time);
			values.add(value);
			if( ((int) (time*10 % 10)) % 2 == 0){
				double pidOutput = pid.process(new State(value, time));
				changeRate = pidOutput;
//System.out.println("Correction System has run.\nNew correction rate is: " + changeRate);
			}
			
			time += rate;
			value += changeRate*rate;
			int temp = (int) Math.round(time*10);
			time = temp/10.0;
		}
		
		writer.flush();
		writer.close();
	}

}
